HentaiCafeV2=Parser:new("HentaiCafeV2 v2","https://hentaicafe.xxx","ENG","HENCAFENGV2",1)HentaiCafeV2.NSFW=true;local function a(b)if u8c then return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&([^;]-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)else return b end end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="string"})while Threads.check(g)do coroutine.yield(false)end;return g.string or""end;function HentaiCafeV2:getManga(f,h,i)local j=e(f)h.NoPages=true;if i=="latest"then j=j:match("</i>%s*New Uploads%s*</h2>(.*)$")or""elseif i=="popular"then j=j:match("^(.*)</i>%s*New Uploads%s*</h2>")or""end;for k,l,m in j:gmatch('href="[^"]*/g/([^"]-)/?"[^>]->%s*<[^>]-src="([^"]-)"[^>]->%s*<div class="caption">%s*([^<]-)%s*</div>')do h[#h+1]=CreateManga(a(m:gsub("<[^>]->","")),k,l:gsub("%%","%%%%"),self.ID,self.Link.."/g/"..k)h.NoPages=i~="popular"coroutine.yield(false)end end;function HentaiCafeV2:getPopularManga(n,h)self:getManga(self.Link.."/?page="..n,h,"popular")end;function HentaiCafeV2:getLatestManga(n,h)self:getManga(self.Link.."/?page="..n,h,"latest")end;function HentaiCafeV2:searchManga(o,n,h)self:getManga(self.Link.."/search?page="..n.."?q="..o,h,"search")end;function HentaiCafeV2:getChapters(p,h)h[#h+1]={Name="Read chapter",Link=p.Link,Pages={},Manga=p}end;function HentaiCafeV2:prepareChapter(q,h)local j=e(self.Link.."/g/"..q.Link)local r=j:match('Pages:%s*<span class="tags">.*name">%s*(%d*)%s*</span>')or 0;for s=1,r do h[#h+1]=self.Link.."/g/"..q.Link.."/"..s end end;function HentaiCafeV2:loadChapterPage(f,h)local j=e(f)h.Link=j:match('id="image%-container">.*src="([^"]-)" class')or""end