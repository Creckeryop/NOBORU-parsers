HhentaiFR=Parser:new("Histoire d'Hentai","https://hhentai.fr","FRA","HHENFRA",1)HhentaiFR.NSFW=true;local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="text"})while Threads.check(g)do coroutine.yield(false)end;return g.text or""end;function HhentaiFR:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l in i:gmatch('c%-image%-hover.-href="[^"]-/manga/([^"/]-)/?" title="([^"]-)".-src="([^"]-)"')do h[#h+1]=CreateManga(a(k),j,l,self.ID,self.Link.."/manga/"..j.."/")h.NoPages=false;coroutine.yield(false)end end;function HhentaiFR:getPopularManga(m,h)self:getManga(self.Link.."/page/"..m.."/?s&post_type=wp-manga",h)end;function HhentaiFR:getLatestManga(m,h)self:getManga(self.Link.."/page/"..m.."/?s&post_type=wp-manga&m_orderby=latest",h)end;function HhentaiFR:getAZManga(m,h)self:getManga(self.Link.."/page/"..m.."/?s&post_type=wp-manga&m_orderby=alphabet",h)end;function HhentaiFR:searchManga(n,m,h)self:getManga(self.Link.."/page/"..m.."/?s="..n.."&post_type=wp-manga",h)end;function HhentaiFR:getChapters(o,h)do local i=e(self.Link.."/manga/"..o.Link)local p=i:match("description%-summary.-<p>([^<]-)</p>")or""h.Description=a(p:gsub("<.->",""):gsub("^%s+",""):gsub("%s+$",""))end;do local q={}local i=e({Link=self.Link.."/manga/"..o.Link.."/ajax/chapters/",HttpMethod=POST_METHOD})for j,k in i:gmatch('wp%-manga%-chapter.-href="[^"]-/manga/([^"]-)">%s*([^<]-)%s*</a>')do q[#q+1]={Name=a(k),Link=j,Pages={},Manga=o}end;for r=#q,1,-1 do h[#h+1]=q[r]end end end;function HhentaiFR:prepareChapter(s,h)local i=e(self.Link.."/manga/"..s.Link):match("var chapter_preloaded_images = %[([^%]]-)%]")or""for j in i:gmatch('"([^"]-)"')do h[#h+1]=j:gsub("\\/","/")end end;function HhentaiFR:loadChapterPage(f,h)h.Link=f end