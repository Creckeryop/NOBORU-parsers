CartoonClubTH=Parser:new("CartoonClub-TH","https://www.toonclub-th.co","THA","CARTOONCLUBTH",1)local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="string"})while Threads.check(g)do coroutine.yield(false)end;return g.string or""end;function CartoonClubTH:getManga(f,h)local i=e(f)local j=h;j.NoPages=true;for k,l,m in i:gmatch('aniframe">.-href="[^"]*/([^"]-)/".-src="([^"]-)".-manga%-title">([^<]-)</a>')do local n=CreateManga(a(m),k,l,self.ID,self.Link.."/"..k)if n then j.NoPages=false;j[#j+1]=n end;coroutine.yield(false)end end;function CartoonClubTH:getPopularManga(o,h)self:getManga(self.Link.."/page/"..o.."/?s=mostviews",h)end;function CartoonClubTH:getLatestManga(o,h)self:getManga(self.Link.."/page/"..o.."/?s=manga-ongoing",h)end;function CartoonClubTH:searchManga(p,o,h)self:getManga(self.Link.."/page/"..o.."/?s="..p,h)end;function CartoonClubTH:getChapters(n,h)local i=e(self.Link.."/"..n.Link)local j={}for k,m in(i:match('chapter%-name">(.-)</table>')or""):gmatch('href="[^"]*/([^"]-)/"[^>]->([^<]-)<')do j[#j+1]={Name=a(m),Link=k,Pages={},Manga=n}end;for q=#j,1,-1 do h[#h+1]=j[q]end end;function CartoonClubTH:prepareChapter(r,h)local i=e(self.Link.."/"..r.Manga.Link.."/"..r.Link)local j=h;for k in(i:match('id="page_select1"(.-)</div>')or""):gmatch('value="([^"]-)"')do j[#j+1]=k end end;function CartoonClubTH:loadChapterPage(f,h)local i=e(f)h.Link=i:match('name="img_page"[^>]-src="([^"]-)"'):gsub("^%s*",""):gsub("%s*$",""):gsub("\\/","/")end